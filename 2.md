# 2장

이번장에서는 **Cardinality**를 알아볼 것입니다. 

이게 바로 이 글을 읽는분들이 너무너무 어렵고 가장 궁금해 하던 부분일 것 같아요. 

> 일단.. 저도 프론트가 메인이기 때문에 맹신을 하시면 안됩니다.. 하지만 틀린정보는 없을것이에요!

아, 참고로 여기부터는 아래 표가 태이블을 의미하고 안에 값들은 칼럼을 의미한다는 정도를 알고 계신분들이 보시기를 추천해요!

![](.gitbook/assets/image%20%2813%29.png)

## **Cardinality**

![&#xC5EC;&#xB7EC;&#xBD84; &#xC774;&#xAC70; &#xB9CE;&#xC774; &#xBCF4;&#xC168;&#xC8E0;?!!?](.gitbook/assets/image%20%284%29.png)

물론 마지막 선은 일단은 잘못된 그림입니다. 양쪽으로 까치발을 만들어 줄 수는 없어요!! \(이부분은 다음장에서 설명하니 일단 이해만 해주세요\)

### 1:1 관계

1 대 1 관계는 아래 그림처럼 유저와 유저 연락처의 태이블을 만들었을 경우로 설명할 수 있어요.

![](.gitbook/assets/image%20%2821%29.png)

모든 관계를 볼때는 1번태이블의 입장에서 2번태이블에 몇개를 가질수 있는지, 2번입장에서 1번을 몇개 가질 수 있는지를 생각해 보아야 합니다. 

유저는 연락처 정보를 한세트만 가질 수 있겠죠? 연락처도 한명의 유저만 가질 수 있습니다. 

이런 경우는 1대1관계라고 하게 됩니다. 

추가적으로 위 사진과 같은 경우는 연락처 정보의 식별자가 유저의 식별자와 동일하게 사용되고 있기 때문에 식별관계라고 할 수 있겠네요. 

또한 다이어그램에서는 아래 선으로 표현할 수 있습니다.

![&#xADF8;&#xB0E5; &#xC2E4;&#xC120;&#xC785;&#xB2C8;&#xB2E4;.](.gitbook/assets/image%20%2814%29.png)



### 1:다 관계 \(1:N\)

 **1대 다 관계**는 **1:1관계**처럼 서로 태이블의 입장에서 한번씩 생각해보면 됩니다. 

**저자\(유저\)**와 **댓글**의 관계로 설명을 할 수 있겠네요. 

{% hint style="info" %}
한명의 유저는 여러개의 댓글을 작성할 수 있습니다. 

댓글은 한명의 작성자\(유저\)밖에 가질 수 없습니다. 

한개:여러개 즉, 1:N관계입니다.
{% endhint %}

![](.gitbook/assets/image%20%282%29.png)

* 푸른선은 홍길동 저자가 여러 댓글을 가지고 있습니다.
* 녹색선은 댓글 하나가 한명의 작성자를 가지고 있습니다.

1:N관계는 다음 선으로 표현할 수 있습니다.

![](.gitbook/assets/image%20%2817%29.png)



### 다대다 관계 

가장 어렵고 햇갈리는 부분입니다. 

책들을 보면 한명이 아닌 여러명이 작성한 책들이 있죠? 그걸 예시로 들어봅시다. 

![](.gitbook/assets/image%20%289%29.png)

1. 홍길동 저자는 **JS정석**, **아름다운 CSS** 즉 여러개의 책을 썼습니다. 
2. JS 정석 책은 **홍길동**저자와 **고주몽** 저자 즉 여러명의 저자를 가지고 있습니다.
3. 서로 여러개를 가질 수 있어서 다대다 관계가 성립됩니다.

좀 어려운 부분이니 해쉬태그로 예시를 들어볼까요? 

![](.gitbook/assets/image%20%2811%29.png)

1. 리액트라는 해쉬태그는 1번글,3번글에 연결되어 있습니다.
2. 1번글에는 \#리액트,\#css 두개의 해쉬태그가 있습니다.

두 태이블 모두 여러값과 관계가 형성되어 있으니 다대다 관계로 볼 수 있겠죠? 

![&#xC120;&#xC73C;&#xB85C;&#xB3C4; &#xC774;&#xB807;&#xAC8C; &#xD45C;&#xD604;&#xD558;&#xBA74; &#xB420;&#xAE4C;&#xC694;?](.gitbook/assets/image%20%2826%29.png)

아쉽게도 아니에요....

{% hint style="danger" %}
관계형 DB에서는 저런 모양으로 관계를 나타낼 수 없습니다. \(없어요!!\)

이유는 다음예시를 보며 이해해 볼게요. 
{% endhint %}

![](.gitbook/assets/image%20%2815%29.png)

* kim은 MySQL, SQL Server , ORACLE을 다룰 수 있고, 
* lee 는 MySQL, SQL Server를 다룰 수 있다고 가정해보세요.

그리고 유저와 DB 두 태이블을 만들어 줍니다. 

> 유저는 다양한 DB를 할수 있고, 하나의 DB를 할수 있는 유저는 여러명이니 다대다 관계겠죠?

![](.gitbook/assets/image%20%2812%29.png)

MySQL을 다루는 사람이 2명있다는 것을 어떻게 구현할까요?

![&#xC774;&#xB807;&#xAC8C; &#xC678;&#xB798;&#xD0A4;&#xB97C; 1&#xBC88;&#xC720;&#xC800;,2&#xBC88;&#xC720;&#xC800; 2&#xAC1C; &#xB123;&#xC5B4;&#xC904; &#xC218; &#xC788;&#xB098;&#xC694;?](.gitbook/assets/image%20%2825%29.png)

#### 한칼럼에는 오직 한개의 데이터!

DB의 규칙이자 원리상 한개의 데이터값만 들어올 수 있습니다.. 그래서 저 다대다 관계를 만들어줄 태이블 하나를 만들어 주어야 합니다. 

이 태이블은 **관계태이블, 연결태이블**이라고 부를 수 있어요. 

연결태이블에서는 연결할 두 태이블의 식별키를 외래키로 각각 가져와서 사용합니다.

![&#xCC38;&#xACE0;&#xB85C; &#xC800;&#xB807;&#xAC8C; &#xD0A4;&#xAC00; &#xB450;&#xAC1C; &#xBB36;&#xC5EC;&#xC788;&#xB294; &#xAC83;&#xC744; &apos;&#xC911;&#xBCF5;&#xD0A4;&apos;&#xB77C;&#xACE0; &#xD574;&#xC694;. &#xBB36;&#xC778; &#xC911;&#xBCF5;&#xD0A4;&#xB294; PK&#xB85C;&#xB3C4; &#xC4F8;&#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.](.gitbook/assets/image%20%285%29.png)

1. **author\_id 1번유저 Kim** 은 **topic\_id가 1번인 MySQL**을 할 수 있다.
2. **author\_id 1번유저 Kim** 은 **topic\_id가 2번인 ORACLE**을 할 수 있다.
3. **author\_id 1번유저 Kim** 은 **topic\_id가 3번인 SQL Server**을 할 수 있다.
4. **author\_id 2번유저 Lee는** **topic\_id가 1번인 MySQL**을 할 수 있다.
5. **author\_id 2번유저 Lee는** **topic\_id가 3번인 SQL Server**을 할 수 있다.

이렇게 다대다 관계를 만들어주는 연결태이블을 따로 생성해 다대다 관계를 지어줄 수 있습니다. 

다이어 그램으로 표현하면 다음과 같겠네요.

![](.gitbook/assets/image%20%2824%29.png)

## 정리

* 관계를 지어줄때는 두개의 태이블 각각의 입장에서 상태 태이블을 얼마나 가질수 있는지 생각해본다. 
* 다대다 관계에서는 연결태이블을 생성해 각각의 식별자를 외래키로 받아와 연결해준다.



다음장에서는 아래 그림에서 O  ,  I 에 대하여 알아볼 거에요!!

![](.gitbook/assets/image%20%2820%29.png)

